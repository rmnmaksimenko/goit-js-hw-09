{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SACA,IAAIC,EAAQ,KACRC,EAAO,KACPC,EAAS,KACTC,EAAQ,KACRC,EAAc,EACdC,EAAU,EAEDC,SAASC,cAAc,SAE/BC,iBAAiB,UAAUC,IAC9B,GAAgB,IAAZJ,EACF,OAEFA,EAAU,EACVI,EAAEC,iBACF,MAAMC,EAAW,IAAIC,SAASH,EAAEI,QAChCb,EAAQc,SAASC,OAAOC,YAAYL,GAAUM,OAC9ChB,EAAOa,SAASC,OAAOC,YAAYL,GAAUO,MAC7ChB,EAASY,SAASC,OAAOC,YAAYL,GAAUQ,QAE/CC,YAAW,KACTjB,EAAQkB,aAAY,KAClB,MAAMC,EAAYtB,EAAQC,EAAOG,EAcvC,IAAuBmB,EAAUC,EAb3BpB,GAAe,GAaEmB,EAZHnB,EAYaoB,EAZAF,EAaxB,IAAIG,SAAQ,CAACC,EAASC,KACLC,KAAKC,SAAW,GAEpCH,EAAQ,uBAAqBH,QAAiBC,OAE5CG,EAAK,sBAAoBJ,QAAeC,WAjBvCM,MAAKC,GAAKC,EAAAlC,GAASmC,OAAOC,QAAQH,KAClCI,OAAMC,GAAKJ,EAAAlC,GAASmC,OAAOI,QAAQD,KAClChC,IAAgBF,IAClBoC,cAAcnC,GACdC,EAAc,EACdC,EAAU,KAEXJ,KACFD","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nlet delay = null;\nlet step = null;\nlet amount = null;\nlet timer = null;\nlet currentTick = 0;\nlet isGoing = 0;\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', e => {\n  if (isGoing === 1) {\n    return;\n  }\n  isGoing = 1;\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  delay = parseInt(Object.fromEntries(formData).delay);\n  step = parseInt(Object.fromEntries(formData).step);\n  amount = parseInt(Object.fromEntries(formData).amount);\n\n  setTimeout(() => {\n    timer = setInterval(() => {\n      const timespent = delay + step * currentTick;\n      currentTick += 1;\n      createPromise(currentTick, timespent)\n        .then(r => Notiflix.Notify.success(r))\n        .catch(e => Notiflix.Notify.failure(e));\n      if (currentTick === amount) {\n        clearInterval(timer);\n        currentTick = 0;\n        isGoing = 0;\n      }\n    }, step);\n  }, delay);\n});\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      resolve(`✅ Fulfilled promise ${position} in ${delay}ms`);\n    } else {\n      reject(`❌ Rejected promise ${position} in ${delay}ms`);\n    }\n  });\n}\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$delay","$47d4ff9957288465$var$step","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$timer","$47d4ff9957288465$var$currentTick","$47d4ff9957288465$var$isGoing","document","querySelector","addEventListener","e1","preventDefault","formData","FormData","target","parseInt","Object","fromEntries","delay","step","amount","setTimeout","setInterval","timespent","position","delay1","Promise","resolve","reject","Math","random","then","r","$parcel$interopDefault","Notify","success","catch","e","failure","clearInterval"],"version":3,"file":"03-promises.d523f6e9.js.map"}