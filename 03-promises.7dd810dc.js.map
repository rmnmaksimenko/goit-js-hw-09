{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SACIC,EAAQ,KACRC,EAAO,KACPC,EAAS,KACTC,EAAQ,KACRC,EAAc,EACdC,EAAU,EAEDC,SAASC,cAAc,SAE/BC,iBAAiB,UAAU,SAAAC,GAC9B,GAAgB,IAAZJ,EAAJ,CAGAA,EAAU,EACVI,EAAEC,iBACF,IAAMC,EAAW,IAAIC,SAASH,EAAEI,QAChCb,EAAQc,SAASC,OAAOC,YAAYL,GAAUM,OAC9ChB,EAAOa,SAASC,OAAOC,YAAYL,GAAUO,MAC7ChB,EAASY,SAASC,OAAOC,YAAYL,GAAUQ,QAE/CC,YAAW,WACTjB,EAAQkB,aAAY,WAClB,IAciBC,EAAUC,EAdrBC,EAAYxB,EAAQC,EAAOG,GAchBkB,EAbjBlB,GAAe,EAaYmB,EAZAC,EAaxB,IAAIC,SAAQ,SAACC,EAASC,GACLC,KAAKC,SAAW,GAEpCH,EAAS,uBAAuCI,OAAfR,EAAS,QAAYQ,OAANP,EAAM,OAEpDI,EAAM,sBAAoCG,OAAfR,EAAS,QAAYQ,OAANP,EAAM,WAjB/CQ,MAAK,SAAAC,UAAKC,EAAAnC,GAASoC,OAAOC,QAAQH,MAClCI,OAAM,SAAAC,UAAKJ,EAAAnC,GAASoC,OAAOI,QAAQD,MAClCjC,IAAgBF,IAClBqC,cAAcpC,GACdC,EAAc,EACdC,EAAU,KAEXJ,KACFD","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nlet delay = null;\nlet step = null;\nlet amount = null;\nlet timer = null;\nlet currentTick = 0;\nlet isGoing = 0;\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', e => {\n  if (isGoing === 1) {\n    return;\n  }\n  isGoing = 1;\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  delay = parseInt(Object.fromEntries(formData).delay);\n  step = parseInt(Object.fromEntries(formData).step);\n  amount = parseInt(Object.fromEntries(formData).amount);\n\n  setTimeout(() => {\n    timer = setInterval(() => {\n      const timespent = delay + step * currentTick;\n      currentTick += 1;\n      createPromise(currentTick, timespent)\n        .then(r => Notiflix.Notify.success(r))\n        .catch(e => Notiflix.Notify.failure(e));\n      if (currentTick === amount) {\n        clearInterval(timer);\n        currentTick = 0;\n        isGoing = 0;\n      }\n    }, step);\n  }, delay);\n});\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      resolve(`✅ Fulfilled promise ${position} in ${delay}ms`);\n    } else {\n      reject(`❌ Rejected promise ${position} in ${delay}ms`);\n    }\n  });\n}\n"],"names":["$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$delay","$ce04d3a99e08e73b$var$step","$ce04d3a99e08e73b$var$amount","$ce04d3a99e08e73b$var$timer","$ce04d3a99e08e73b$var$currentTick","$ce04d3a99e08e73b$var$isGoing","document","querySelector","addEventListener","e1","preventDefault","formData","FormData","target","parseInt","Object","fromEntries","delay","step","amount","setTimeout","setInterval","position","delay1","timespent","Promise","resolve","reject","Math","random","concat","then","r","$parcel$interopDefault","Notify","success","catch","e","failure","clearInterval"],"version":3,"file":"03-promises.7dd810dc.js.map"}